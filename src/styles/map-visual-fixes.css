
/* CRITICAL VISUAL FIXES FOR MAP CONTAINER RENDERING */

/* Ensure the map container parent has proper height */
.m1ssion-glass-card {
  min-height: 70vh !important;
  height: auto !important;
  overflow: visible !important;
}

/* Fix for map container sizing issues */
.leaflet-container {
  width: 100% !important;
  height: 100% !important;
  min-height: 70vh !important;
  position: relative !important;
  outline: none;
  overflow: hidden !important;
  opacity: 1 !important;
  visibility: visible !important;
  display: block !important;
}

/* Ensure tiles render properly without duplication */
.leaflet-tile-pane {
  position: absolute !important;
  left: 0 !important;
  top: 0 !important;
  z-index: 200 !important;
}

.leaflet-tile {
  image-rendering: auto !important;
  image-rendering: crisp-edges !important;
  image-rendering: -webkit-optimize-contrast !important;
  border: none !important;
  margin: 0 !important;
  padding: 0 !important;
  opacity: 1 !important;
  visibility: visible !important;
}

/* Fix for mobile rendering issues */
.leaflet-container img {
  max-width: none !important;
  max-height: none !important;
}

/* Prevent multiple map instances */
.leaflet-map-pane {
  position: absolute !important;
  left: 0 !important;
  top: 0 !important;
  z-index: auto !important;
  width: 100% !important;
  height: 100% !important;
}

/* Ensure proper layer stacking */
.leaflet-overlay-pane {
  position: absolute !important;
  left: 0 !important;
  top: 0 !important;
  z-index: 400 !important;
}

/* Fix for control positioning */
.leaflet-control-container {
  position: absolute !important;
  left: 0 !important;
  top: 0 !important;
  z-index: 800 !important;
}

/* CRITICAL: Ensure map container has proper height in all contexts */
div[style*="height: 70vh"] .leaflet-container,
.m1ssion-glass-card .leaflet-container {
  min-height: 70vh !important;
  height: 100% !important;
}

/* Prevent CSS conflicts that might hide the map */
.leaflet-container * {
  box-sizing: border-box;
}

/* Ensure the map is always visible and rendered */
.leaflet-container canvas,
.leaflet-container svg {
  display: block !important;
  visibility: visible !important;
  opacity: 1 !important;
}

/* Fix for parent container in MapPage */
.container.mx-auto .m1ssion-glass-card {
  min-height: 70vh !important;
  height: auto !important;
}

/* iOS Safe Area fixes for Capacitor */
@supports (padding: env(safe-area-inset-top)) {
  .ios-safe-area-top {
    padding-top: env(safe-area-inset-top);
  }
  
  .ios-safe-area-bottom {
    padding-bottom: env(safe-area-inset-bottom);
  }
  
  .ios-safe-area-left {
    padding-left: env(safe-area-inset-left);
  }
  
  .ios-safe-area-right {
    padding-right: env(safe-area-inset-right);
  }
}

/* Capacitor specific fixes */
.capacitor-app .leaflet-container {
  touch-action: manipulation;
  -webkit-touch-callout: none;
  -webkit-user-select: none;
  user-select: none;
}

/* Fix for iOS zoom controls */
.capacitor-app .leaflet-control-zoom {
  -webkit-touch-callout: none;
  touch-action: manipulation;
}
